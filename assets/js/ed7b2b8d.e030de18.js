"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[3791],{23514:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>t,metadata:()=>l,toc:()=>o});var r=s(74848),i=s(28453);const t={sidebar_position:1},d="Design",l={id:"system-architecture/design",title:"Design",description:"The front-end client is built with React and Next.js, while the back-end leverages Firebase for real-time database synchronization, authentication, and",source:"@site/docs/system-architecture/design.md",sourceDirName:"system-architecture",slug:"/system-architecture/design",permalink:"/storyquest/docs/system-architecture/design",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Ian Applebaum",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docsSidebar",previous:{title:"System Architecture",permalink:"/storyquest/docs/category/system-architecture"},next:{title:"Development Environment",permalink:"/storyquest/docs/system-architecture/development-environment"}},c={},o=[{value:"Components Description",id:"components-description",level:2},{value:"Client (Front-End)",id:"client-front-end",level:3},{value:"Server (Back-End)",id:"server-back-end",level:3},{value:"Class Diagrams",id:"class-diagrams",level:3},{value:"Room Management",id:"room-management",level:4},{value:"Game Flow Summary",id:"game-flow-summary",level:4},{value:"Database Schema",id:"database-schema",level:3},{value:"Collections",id:"collections",level:4},{value:"<code>users</code> Collection",id:"users-collection",level:6},{value:"<code>rooms</code> Collection",id:"rooms-collection",level:6},{value:"<code>games</code> Collection",id:"games-collection",level:6},{value:"<code>stories</code> Collection",id:"stories-collection",level:6},{value:"Data Flow Diagram",id:"data-flow-diagram",level:2},{value:"Database Design",id:"database-design",level:3},{value:"Firestore Collection Structure",id:"firestore-collection-structure",level:2},{value:"<code>users</code> Collection (Figure 3)",id:"users-collection-figure-3",level:3},{value:"<code>rooms</code> Collection (Figure 4)",id:"rooms-collection-figure-4",level:3},{value:"<code>roomPlayers</code> Subcollection",id:"roomplayers-subcollection",level:3},{value:"<code>stories</code> Collection (Figure 6)",id:"stories-collection-figure-6",level:3},{value:"<code>gameState</code> Subcollection (within rooms)",id:"gamestate-subcollection-within-rooms",level:3}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h6:"h6",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"design",children:"Design"}),"\n",(0,r.jsx)(n.p,{children:"The front-end client is built with React and Next.js, while the back-end leverages Firebase for real-time database synchronization, authentication, and\naccessible experience for AAC users, incorporating symbol-based communication and text-to-speech capabilities."}),"\n",(0,r.jsx)(n.h2,{id:"components-description",children:"Components Description"}),"\n",(0,r.jsx)(n.h3,{id:"client-front-end",children:"Client (Front-End)"}),"\n",(0,r.jsx)(n.p,{children:"The client is a React application built with Next.js framework, offering server-side rendering for improved performance and SEO. It provides the user interface that students interact with, including AAC features, story navigation, and room management."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Technologies Used:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"React (UI components)"}),"\n",(0,r.jsx)(n.li,{children:"Next.js (Routing and server-side rendering)"}),"\n",(0,r.jsx)(n.li,{children:"Tailwind CSS (Responsive and accessible styling)"}),"\n",(0,r.jsx)(n.li,{children:"Framer Motion (Smooth animations for kids)"}),"\n",(0,r.jsx)(n.li,{children:"TypeScript (Ease of use in JavaScript)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Responsibilities:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Display the homepage with options to create a profile, create, or join a room."}),"\n",(0,r.jsx)(n.li,{children:"Render stories and cloze-phrase questions"}),"\n",(0,r.jsx)(n.li,{children:"Handle AAC interactions (symbol grids, text-to-speech)"}),"\n",(0,r.jsx)(n.li,{children:"Communicate with Firebase for real-time updates and authentication"}),"\n",(0,r.jsx)(n.li,{children:"Provide responsive design for tablets and desktops"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interface:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Firebase SDK: The client uses the Firebase JavaScript SDK for real-time communication with the back-end."}),"\n",(0,r.jsx)(n.li,{children:"AAC Symbol Library (ARASAAC): Provides visual symbols for communication"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"server-back-end",children:"Server (Back-End)"}),"\n",(0,r.jsx)(n.p,{children:"The back-end services are managed by Firebase, which provides real-time database capabilities, authentication, and cloud functions for game logic.\nThis architecture minimizes server management overhead while offering scalability and performance."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Technologies Used:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Firebase Authentication: For secure room joining and session management."}),"\n",(0,r.jsx)(n.li,{children:"Firebase Firestore: A NoSQL real-time database to store game data, room information, and group progress."}),"\n",(0,r.jsx)(n.li,{children:"Firebase Cloud Functions: To handle server-side logic like validating game answers and managing game state."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Responsibilities:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Manage session tokens."}),"\n",(0,r.jsx)(n.li,{children:"Handle real-time game state updates across all players."}),"\n",(0,r.jsx)(n.li,{children:"Store and retrieve stories, game progress, and player data."}),"\n",(0,r.jsx)(n.li,{children:"Execute server-side logic for game validation"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interfaces:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Client Requests: The client interacts with the server via Firebase SDK calls, which handle real-time data synchronization."}),"\n",(0,r.jsx)(n.li,{children:"Cloud Functions Triggers: Automatically execute server-side logic when certain conditions are met (like when a new answer is submitted)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"class-diagrams",children:"Class Diagrams"}),"\n",(0,r.jsx)(n.mermaid,{value:"classDiagram\n    class Home {\n        +CreateButton\n        +JoinButton\n        +HomePageBackgroundMusic\n    }\n\n    class CreateRoomPage {\n        +selectedStory\n        +numPlayers\n        +difficultyLevel\n        +createRoom()\n    }\n\n    class JoinRoomPage {\n        +roomId\n        +handleCapturedImage()\n        +processQRCode()\n        +handleJoinRoom()\n    }\n\n    class CompletionPage {\n        +displayCompletion()\n        +playCompletionSound()\n    }\n\n    class AACKeyboard {\n        +onSelect(word)\n        +symbols[]\n        +backgroundColor\n        +buttonColor\n        +blockButtons\n    }\n\n    class Camera {\n        +videoRef\n        +canvasRef\n        +startCamera()\n        +captureAndScanFrame()\n    }\n\n    class CompletedStory {\n        +index\n        +completedPhrases[]\n        +onComplete()\n        +roomId\n        +handlePhraseComplete()\n    }\n\n    class TextToSpeechTextOnly {\n        +text\n        +onComplete()\n        +speakText()\n    }\n\n    class TextToSpeechAACButtons {\n        +text\n        +onSpeechEnd()\n        +playSpeech()\n        +stopSpeech()\n    }\n\n    class useButtonFeedback {\n        +buttonHandler()\n        +isSpeaking\n    }\n\n    class useQuickTextToSpeech {\n        +speak(text)\n        +stop()\n        +isReady\n    }\n\n    class useTextToSpeech {\n        +speak(text)\n        +stop()\n        +isReady\n    }\n\n    class useAACSounds {\n        +playSound(word)\n    }\n\n    %% Relationships\n    Home --\x3e CreateRoomPage\n    Home --\x3e JoinRoomPage\n\n    CreateRoomPage --\x3e useButtonFeedback\n    CreateRoomPage --\x3e useQuickTextToSpeech\n\n    JoinRoomPage --\x3e Camera\n    JoinRoomPage --\x3e useButtonFeedback\n    JoinRoomPage --\x3e useQuickTextToSpeech\n\n    CompletionPage --\x3e CompletedStory\n    CompletionPage --\x3e useButtonFeedback\n\n    CompletedStory --\x3e TextToSpeechTextOnly\n\n    AACKeyboard --\x3e useAACSounds\n    AACKeyboard --\x3e useButtonFeedback\n\n    TextToSpeechAACButtons --\x3e useQuickTextToSpeech\n    TextToSpeechAACButtons --\x3e useTextToSpeech\n\n    TextToSpeechTextOnly --\x3e useTextToSpeech\n"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Figure 1: Class diagram showing interactions between classes within StoryQuest"})}),"\n",(0,r.jsx)(n.p,{children:"This class diagram shows the relationship between different components in the StoryQuest system."}),"\n",(0,r.jsx)(n.h4,{id:"room-management",children:"Room Management"}),"\n",(0,r.jsx)(n.p,{children:"This section outlines the core frontend pages involved in the multiplayer room lifecycle, from game setup to lobby management and game start. Each page interacts with Firestore and Firebase Cloud Functions to manage real-time multiplayer sessions."}),"\n",(0,r.jsx)(n.p,{children:"HomePage: The HomePage is the landing interface for users when they first open the application. It offers two primary options:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"joinRoom()"}),": Allows a player to join an existing game session via a QR code or room ID. Validates the room ID and redirects the player to the Gameplay page,"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"createRoom()"}),": Initiates the process of creating a new game room. Redirects the user to the CreateRoom flow for configuration."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"CreateRoom: The CreateRoom flow provides game setup tools for the host, allowing them to define the session settings before inviting players."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"selectStory()"}),": Lets the host choose a story template from a predefined library. This determines the narrative flow of the game."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"selectDifficulty()"}),': Sets the difficulty level of the game (e.g., "easy", "medium", "hard"), impacting pacing or challenge level.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"selectNumPlayers()"}),": Specifies the maximum number of players allowed in the game room (up to 4)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"startGameRoom()"}),": Finalizes the configuration, creates the room document in Firestore, and transitions the host to the gameplay session."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"game-flow-summary",children:"Game Flow Summary"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"The host sets up the game in CreateRoom."}),"\n",(0,r.jsx)(n.li,{children:"Players join a room via JoinRoom on the HomePage."}),"\n",(0,r.jsx)(n.li,{children:"Players wait on a screen on the Gameplay page until the game starts."}),"\n",(0,r.jsx)(n.li,{children:"The game begins on the right panel of Gameplay, displaying a phrase with blanks to fill alongside a background and images."}),"\n",(0,r.jsx)(n.li,{children:"Players take turns selecting answers from the AACBoard on the left panel of Gameplay."}),"\n",(0,r.jsx)(n.li,{children:"The selected word is displayed on the bottom of the right panel of the Gameplay page and sent to the Firestore."}),"\n",(0,r.jsx)(n.li,{children:"The game continues turn-by-turn until the story is complete."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"database-schema",children:"Database Schema"}),"\n",(0,r.jsx)(n.h4,{id:"collections",children:"Collections"}),"\n",(0,r.jsxs)(n.h6,{id:"users-collection",children:[(0,r.jsx)(n.code,{children:"users"})," Collection"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"userId"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"string"})," (Primary Key)"]}),(0,r.jsx)(n.td,{children:"Unique identifier"}),(0,r.jsx)(n.td,{children:'"user_abc123"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Player's display name"}),(0,r.jsx)(n.td,{children:'"Player 1"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"avatar"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Emoji or image URL"}),(0,r.jsx)(n.td,{children:'"\ud83d\udc31"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"createdAt"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"timestamp"})}),(0,r.jsx)(n.td,{children:"Account creation time"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"2023-11-15T14:32:00Z"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lastActive"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"timestamp"})}),(0,r.jsx)(n.td,{children:"Last login time"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"2023-11-20T09:15:00Z"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Responsibilities:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Stores player profiles and preferences"}),"\n",(0,r.jsx)(n.li,{children:"Tracks user activity"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h6,{id:"rooms-collection",children:[(0,r.jsx)(n.code,{children:"rooms"})," Collection"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"roomId"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"string"})," (PK)"]}),(0,r.jsx)(n.td,{children:"Alphanumeric code which turns into a qr code"}),(0,r.jsx)(n.td,{children:'"ABCDEF"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"hostId"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"string"})," (FK)"]}),(0,r.jsx)(n.td,{children:"Creator's userId"}),(0,r.jsx)(n.td,{children:'"user_abc123"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"players"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"array"})}),(0,r.jsx)(n.td,{children:"List of userIds"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'["user_abc123", "user_xyz456"]'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currentTurn"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Player turn index"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"storyId"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"string"})," (FK)"]}),(0,r.jsx)(n.td,{children:"Current story"}),(0,r.jsx)(n.td,{children:'"The Garden Adventure"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"difficulty"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Game level"}),(0,r.jsx)(n.td,{children:'"medium"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"status"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Game state"}),(0,r.jsx)(n.td,{children:'"playing"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"createdAt"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"timestamp"})}),(0,r.jsx)(n.td,{children:"Creation time"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"2023-11-20T10:00:00Z"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Responsibilities:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Manages active game sessions"}),"\n",(0,r.jsx)(n.li,{children:"Tracks turn order"}),"\n",(0,r.jsx)(n.li,{children:"Stores room configuration"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h6,{id:"games-collection",children:[(0,r.jsx)(n.code,{children:"games"})," Collection"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"gameId"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"string"})," (PK)"]}),(0,r.jsx)(n.td,{children:"Session ID"}),(0,r.jsx)(n.td,{children:'"game_123"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"roomId"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"string"})," (FK)"]}),(0,r.jsx)(n.td,{children:"Associated room"}),(0,r.jsx)(n.td,{children:'"ABCDEF"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currentPhrase"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Active story segment"}),(0,r.jsx)(n.td,{children:'"The ___ flew high"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completedPhrases"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"array"})}),(0,r.jsx)(n.td,{children:"Finished segments"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'["The bird", "The bird flew"]'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completedImages"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"array"})}),(0,r.jsx)(n.td,{children:"Selected images"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'[{word: "bird", src: "bird.png"}]'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currentSectionIndex"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Progress index"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"2"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"maxPlayers"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Player limit"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"4"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Responsibilities:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tracks real-time game state"}),"\n",(0,r.jsx)(n.li,{children:"Stores completed content"}),"\n",(0,r.jsx)(n.li,{children:"Maintains player selections"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h6,{id:"stories-collection",children:[(0,r.jsx)(n.code,{children:"stories"})," Collection"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"storyId"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"string"})," (PK)"]}),(0,r.jsx)(n.td,{children:"Unique ID"}),(0,r.jsx)(n.td,{children:'"story_garden"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"title"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Story title"}),(0,r.jsx)(n.td,{children:'"Garden Adventure"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"gradeLevel"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Difficulty (1-3)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"content"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"array"})}),(0,r.jsx)(n.td,{children:"Story segments"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'["The ___", "The ___ flew"]'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"wordBank"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"map"})}),(0,r.jsx)(n.td,{children:"AAC symbols"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'{"bird": {image: "bird.png", sound: "bird.mp3"}}'})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Responsibilities:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Stores story content"}),"\n",(0,r.jsx)(n.li,{children:"Provides AAC resources"}),"\n",(0,r.jsx)(n.li,{children:"Manages grade levels"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"data-flow-diagram",children:"Data Flow Diagram"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant User\n    participant UI\n    participant Firestore\n    participant CloudFunctions\n    \n    %% Room Creation Flow\n    User->>UI: Selects story/difficulty/players\n    UI->>Firestore: Creates new room document\n    Firestore->>CloudFunctions: Triggers roomCreated function\n    CloudFunctions->>Firestore: Initializes game state\n    \n    %% Player Joining Flow\n    User->>UI: Chooses avatar\n    UI->>Firestore: Updates player profile (avatar)\n    UI->>Firestore: Adds player to room.players[]\n    Firestore->>All Clients: Broadcasts player list update\n    \n    %% Gameplay Flow\n    loop Each Turn\n        User->>UI: Selects AAC symbol\n        UI->>Firestore: Records selection in game state\n        Firestore->>CloudFunctions: Checks turn completion\n        CloudFunctions->>Firestore: Updates currentTurn/phrase\n        Firestore->>All Clients: Updates game board\n    end\n    \n    %% Game Completion Flow\n    CloudFunctions->>Firestore: Marks game as completed\n    Firestore->>UI: Triggers celebration screen\n    UI->>User: Shows results with avatars\n    UI->>Firestore: Archives game data"}),"\n",(0,r.jsx)(n.h3,{id:"database-design",children:"Database Design"}),"\n",(0,r.jsx)(n.p,{children:"Here is the database section with an Entity-Relationship Diagram\n(ERD) and a table design for StoryQuest. While Firestore is a NoSQL\ndatabase, we represent the structure relationally for design clarity.\nCollections are shown as tables with their key fields."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Entity-Relationship Diagram"})}),"\n",(0,r.jsx)(n.mermaid,{value:'erDiagram\n    USER ||--o{ PLAYER_PROGRESS : "has"\n    ROOM ||--o{ PLAYER_PROGRESS : "tracks"\n    ROOM ||--|| STORY : "uses"\n    ROOM ||--|{ GAME_STATE : "maintains"\n\n    USER {\n        string userId PK "firestore-autoID"\n        string name\n        string avatar "emoji|imageURL"\n        timestamp createdAt\n        timestamp lastActive\n    }\n\n    ROOM {\n        string roomId PK "Alphanumeric Code"\n        string hostId FK "USER.userId"\n        string storyId FK\n        string status "waiting|playing|completed"\n        string difficulty "easy|medium|hard"\n        number maxPlayers "2-4"\n        timestamp createdAt\n        timestamp lastUpdated\n    }\n\n    STORY {\n        string storyId PK\n        string title\n        number gradeLevel "1-3"\n        string content "serialized array"\n        string theme "nature|space|fantasy"\n    }\n\n    GAME_STATE {\n        string gameId PK\n        string roomId FK\n        string currentPhrase\n        number currentTurnIndex "1-4"\n        string completedPhrases "serialized array"\n        string completedImages "serialized array"\n        string players "serialized map"\n    }\n\n    PLAYER_PROGRESS {\n        string userId FK\n        string roomId FK\n        number symbolsContributed\n        number turnsCompleted\n        timestamp lastActive\n    }'}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Figure 2: An entity-relationship diagram showing interactions within the database"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Table Design"})}),"\n",(0,r.jsx)(n.p,{children:"Here is how the data would be structured in Firestore. Though Firestore is a NoSQL database, this relational layout helps clarify the relationships."}),"\n",(0,r.jsx)(n.h2,{id:"firestore-collection-structure",children:"Firestore Collection Structure"}),"\n",(0,r.jsxs)(n.h3,{id:"users-collection-figure-3",children:[(0,r.jsx)(n.code,{children:"users"})," Collection (Figure 3)"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"userId"})," (PK)"]}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Firebase Auth UID"}),(0,r.jsx)(n.td,{children:'"xZ8jyT..."'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Player's display name"}),(0,r.jsx)(n.td,{children:'"Player 1"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"avatar"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Emoji or image URL"}),(0,r.jsx)(n.td,{children:'"\ud83e\udd8a"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"aacSettings"})}),(0,r.jsx)(n.td,{children:"map"}),(0,r.jsx)(n.td,{children:"User preferences"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'{ voiceSpeed: 1.2, theme: "dark" }'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"createdAt"})}),(0,r.jsx)(n.td,{children:"timestamp"}),(0,r.jsx)(n.td,{children:"Account creation"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"2023-11-20T09:15:00Z"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lastActive"})}),(0,r.jsx)(n.td,{children:"timestamp"}),(0,r.jsx)(n.td,{children:"Last login time"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"2023-11-25T14:30:00Z"})})]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"rooms-collection-figure-4",children:[(0,r.jsx)(n.code,{children:"rooms"})," Collection (Figure 4)"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Validation"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"roomId"})," (PK)"]}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"6-digit room code"}),(0,r.jsx)(n.td,{children:'"ABCD12"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"hostId"})}),(0,r.jsx)(n.td,{children:"string (FK)"}),(0,r.jsx)(n.td,{children:"Creator's userId"}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"storyId"})}),(0,r.jsx)(n.td,{children:"string (FK)"}),(0,r.jsx)(n.td,{children:"Selected story"}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"difficulty"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Game level"}),(0,r.jsx)(n.td,{children:'"easy"/"medium"/"hard"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"maxPlayers"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Player limit"}),(0,r.jsx)(n.td,{children:"2-4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currentTurn"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Turn index (1-4)"}),(0,r.jsx)(n.td,{children:"1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"status"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Game state"}),(0,r.jsx)(n.td,{children:'"waiting"/"playing"/"completed"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"createdAt"})}),(0,r.jsx)(n.td,{children:"timestamp"}),(0,r.jsx)(n.td,{children:"Creation time"}),(0,r.jsx)(n.td,{children:"Auto-set"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"timeLimit"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Turn timer (seconds)"}),(0,r.jsx)(n.td,{children:"Optional"})]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"roomplayers-subcollection",children:[(0,r.jsx)(n.code,{children:"roomPlayers"})," Subcollection"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Notes"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"userId"})," (PK)"]}),(0,r.jsx)(n.td,{children:"string (FK)"}),(0,r.jsx)(n.td,{children:"Player reference"}),(0,r.jsx)(n.td,{children:"Indexed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Display name"}),(0,r.jsx)(n.td,{children:"Copied from user"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"avatar"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Player icon"}),(0,r.jsx)(n.td,{children:'"\ud83d\udc36"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"turnOrder"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Player sequence"}),(0,r.jsx)(n.td,{children:"1-4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"joinedAt"})}),(0,r.jsx)(n.td,{children:"timestamp"}),(0,r.jsx)(n.td,{children:"Join time"}),(0,r.jsx)(n.td,{children:"Auto-set"})]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"stories-collection-figure-6",children:[(0,r.jsx)(n.code,{children:"stories"})," Collection (Figure 6)"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"storyId"})," (PK)"]}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Unique ID"}),(0,r.jsx)(n.td,{children:'"garden-1"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"title"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Story title"}),(0,r.jsx)(n.td,{children:'"Magic Garden"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"difficulty"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Difficulty"}),(0,r.jsx)(n.td,{children:"1-3"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"content"})}),(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"Phrase segments"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'["The ___", "sat on the ___"]'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"wordBank"})}),(0,r.jsx)(n.td,{children:"map"}),(0,r.jsx)(n.td,{children:"AAC resources"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'{apple: {image: "apple.png", sound: "apple.mp3"}}'})})]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"gamestate-subcollection-within-rooms",children:[(0,r.jsx)(n.code,{children:"gameState"})," Subcollection (within rooms)"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currentPhrase"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Active story segment"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completedPhrases"})}),(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"Filled segments"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"selectedSymbols"})}),(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'{word: "apple", by: "user123", avatar: "\ud83d\udc31"}'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currentTurn"})}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"Turn index"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lastUpdated"})}),(0,r.jsx)(n.td,{children:"timestamp"}),(0,r.jsx)(n.td,{children:"Auto-updated"})]})]})]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>l});var r=s(96540);const i={},t=r.createContext(i);function d(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);