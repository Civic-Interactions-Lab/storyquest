<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-system-architecture/design" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Design | StoryQuest</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Civic-Interactions-Lab.github.io/storyquest/docs/system-architecture/design"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Design | StoryQuest"><meta data-rh="true" name="description" content="The front-end client is built with React and Next.js, while the back-end leverages Firebase for real-time database synchronization, authentication, and"><meta data-rh="true" property="og:description" content="The front-end client is built with React and Next.js, while the back-end leverages Firebase for real-time database synchronization, authentication, and"><link data-rh="true" rel="icon" href="/storyquest/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Civic-Interactions-Lab.github.io/storyquest/docs/system-architecture/design"><link data-rh="true" rel="alternate" href="https://Civic-Interactions-Lab.github.io/storyquest/docs/system-architecture/design" hreflang="en"><link data-rh="true" rel="alternate" href="https://Civic-Interactions-Lab.github.io/storyquest/docs/system-architecture/design" hreflang="x-default"><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script><link rel="stylesheet" href="/storyquest/assets/css/styles.79408a1e.css">
<script src="/storyquest/assets/js/runtime~main.e842659f.js" defer="defer"></script>
<script src="/storyquest/assets/js/main.3b7f486f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/storyquest/"><div class="navbar__logo"><img src="/storyquest/img/StoryQuest_fixed.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/storyquest/img/StoryQuest_fixed.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">StoryQuest</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/storyquest/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Civic-Interactions-Lab/storyquest" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/storyquest/docs/intro">Introduction : Bridging Social Gaps Through AAC and Collaborative Play</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/storyquest/docs/category/requirements-specification">Requirements Specification</a><button aria-label="Expand sidebar category &#x27;Requirements Specification&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/storyquest/docs/category/system-architecture">System Architecture</a><button aria-label="Collapse sidebar category &#x27;System Architecture&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/storyquest/docs/system-architecture/design">Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/storyquest/docs/system-architecture/development-environment">Development Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/storyquest/docs/system-architecture/version-control">Version Control</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/storyquest/docs/category/api-specification">API Specification</a><button aria-label="Expand sidebar category &#x27;API Specification&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/storyquest/docs/category/test-procedures">Test Procedures</a><button aria-label="Expand sidebar category &#x27;Test Procedures&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/storyquest/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/storyquest/docs/category/system-architecture"><span itemprop="name">System Architecture</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Design</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Design</h1>
<p>The front-end client is built with React and Next.js, while the back-end leverages Firebase for real-time database synchronization, authentication, and
accessible experience for AAC users, incorporating symbol-based communication and text-to-speech capabilities.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="components-description">Components Description<a href="#components-description" class="hash-link" aria-label="Direct link to Components Description" title="Direct link to Components Description">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-front-end">Client (Front-End)<a href="#client-front-end" class="hash-link" aria-label="Direct link to Client (Front-End)" title="Direct link to Client (Front-End)">‚Äã</a></h3>
<p>The client is a React application built with Next.js framework, offering server-side rendering for improved performance and SEO. It provides the user interface that students interact with, including AAC features, story navigation, and room management.</p>
<p><strong>Technologies Used:</strong></p>
<ul>
<li>React (UI components)</li>
<li>Next.js (Routing and server-side rendering)</li>
<li>Tailwind CSS (Responsive and accessible styling)</li>
<li>Framer Motion (Smooth animations for kids)</li>
<li>TypeScript (Ease of use in JavaScript)</li>
</ul>
<p><strong>Responsibilities:</strong></p>
<ul>
<li>Display the homepage with options to create a profile, create, or join a room.</li>
<li>Render stories and cloze-phrase questions</li>
<li>Handle AAC interactions (symbol grids, text-to-speech)</li>
<li>Communicate with Firebase for real-time updates and authentication</li>
<li>Provide responsive design for tablets and desktops</li>
</ul>
<p><strong>Interface:</strong></p>
<ul>
<li>Firebase SDK: The client uses the Firebase JavaScript SDK for real-time communication with the back-end.</li>
<li>AAC Symbol Library (ARASAAC): Provides visual symbols for communication</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="server-back-end">Server (Back-End)<a href="#server-back-end" class="hash-link" aria-label="Direct link to Server (Back-End)" title="Direct link to Server (Back-End)">‚Äã</a></h3>
<p>The back-end services are managed by Firebase, which provides real-time database capabilities, authentication, and cloud functions for game logic.
This architecture minimizes server management overhead while offering scalability and performance.</p>
<p><strong>Technologies Used:</strong></p>
<ul>
<li>Firebase Authentication: For secure room joining and session management.</li>
<li>Firebase Firestore: A NoSQL real-time database to store game data, room information, and group progress.</li>
<li>Firebase Cloud Functions: To handle server-side logic like validating game answers and managing game state.</li>
</ul>
<p><strong>Responsibilities:</strong></p>
<ul>
<li>Manage session tokens.</li>
<li>Handle real-time game state updates across all players.</li>
<li>Store and retrieve stories, game progress, and player data.</li>
<li>Execute server-side logic for game validation</li>
</ul>
<p><strong>Interfaces:</strong></p>
<ul>
<li>Client Requests: The client interacts with the server via Firebase SDK calls, which handle real-time data synchronization.</li>
<li>Cloud Functions Triggers: Automatically execute server-side logic when certain conditions are met (like when a new answer is submitted)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="class-diagrams">Class Diagrams<a href="#class-diagrams" class="hash-link" aria-label="Direct link to Class Diagrams" title="Direct link to Class Diagrams">‚Äã</a></h3>
<!-- -->
<p><em>Figure 1: Class diagram showing interactions between classes within StoryQuest</em></p>
<p>This class diagram shows the relationship between different components in the StoryQuest system.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="room-management">Room Management<a href="#room-management" class="hash-link" aria-label="Direct link to Room Management" title="Direct link to Room Management">‚Äã</a></h4>
<p>This section outlines the core frontend pages involved in the multiplayer room lifecycle, from game setup to lobby management and game start. Each page interacts with Firestore and Firebase Cloud Functions to manage real-time multiplayer sessions.</p>
<p>HomePage: The HomePage is the landing interface for users when they first open the application. It offers two primary options:</p>
<ul>
<li><code>joinRoom()</code>: Allows a player to join an existing game session via a QR code or room ID. Validates the room ID and redirects the player to the Gameplay page,</li>
<li><code>createRoom()</code>: Initiates the process of creating a new game room. Redirects the user to the CreateRoom flow for configuration.</li>
</ul>
<p>CreateRoom: The CreateRoom flow provides game setup tools for the host, allowing them to define the session settings before inviting players.</p>
<ul>
<li><code>selectStory()</code>: Lets the host choose a story template from a predefined library. This determines the narrative flow of the game.</li>
<li><code>selectDifficulty()</code>: Sets the difficulty level of the game (e.g., &quot;easy&quot;, &quot;medium&quot;, &quot;hard&quot;), impacting pacing or challenge level.</li>
<li><code>selectNumPlayers()</code>: Specifies the maximum number of players allowed in the game room (up to 4).</li>
<li><code>startGameRoom()</code>: Finalizes the configuration, creates the room document in Firestore, and transitions the host to the gameplay session.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="game-flow-summary">Game Flow Summary<a href="#game-flow-summary" class="hash-link" aria-label="Direct link to Game Flow Summary" title="Direct link to Game Flow Summary">‚Äã</a></h4>
<ol>
<li>The host sets up the game in CreateRoom.</li>
<li>Players join a room via JoinRoom on the HomePage.</li>
<li>Players wait on a screen on the Gameplay page until the game starts.</li>
<li>The game begins on the right panel of Gameplay, displaying a phrase with blanks to fill alongside a background and images.</li>
<li>Players take turns selecting answers from the AACBoard on the left panel of Gameplay.</li>
<li>The selected word is displayed on the bottom of the right panel of the Gameplay page and sent to the Firestore.</li>
<li>The game continues turn-by-turn until the story is complete.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="database-schema">Database Schema<a href="#database-schema" class="hash-link" aria-label="Direct link to Database Schema" title="Direct link to Database Schema">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="collections">Collections<a href="#collections" class="hash-link" aria-label="Direct link to Collections" title="Direct link to Collections">‚Äã</a></h4>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="users-collection"><code>users</code> Collection<a href="#users-collection" class="hash-link" aria-label="Direct link to users-collection" title="Direct link to users-collection">‚Äã</a></h6>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>userId</code></td><td><code>string</code> (Primary Key)</td><td>Unique identifier</td><td>&quot;user_abc123&quot;</td></tr><tr><td><code>name</code></td><td><code>string</code></td><td>Player&#x27;s display name</td><td>&quot;Player 1&quot;</td></tr><tr><td><code>avatar</code></td><td><code>string</code></td><td>Emoji or image URL</td><td>&quot;üê±&quot;</td></tr><tr><td><code>createdAt</code></td><td><code>timestamp</code></td><td>Account creation time</td><td><code>2023-11-15T14:32:00Z</code></td></tr><tr><td><code>lastActive</code></td><td><code>timestamp</code></td><td>Last login time</td><td><code>2023-11-20T09:15:00Z</code></td></tr></tbody></table>
<p><strong>Responsibilities:</strong></p>
<ul>
<li>Stores player profiles and preferences</li>
<li>Tracks user activity</li>
</ul>
<hr>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="rooms-collection"><code>rooms</code> Collection<a href="#rooms-collection" class="hash-link" aria-label="Direct link to rooms-collection" title="Direct link to rooms-collection">‚Äã</a></h6>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>roomId</code></td><td><code>string</code> (PK)</td><td>Alphanumeric code which turns into a qr code</td><td>&quot;ABCDEF&quot;</td></tr><tr><td><code>hostId</code></td><td><code>string</code> (FK)</td><td>Creator&#x27;s userId</td><td>&quot;user_abc123&quot;</td></tr><tr><td><code>players</code></td><td><code>array</code></td><td>List of userIds</td><td><code>[&quot;user_abc123&quot;, &quot;user_xyz456&quot;]</code></td></tr><tr><td><code>currentTurn</code></td><td><code>number</code></td><td>Player turn index</td><td><code>1</code></td></tr><tr><td><code>storyId</code></td><td><code>string</code> (FK)</td><td>Current story</td><td>&quot;The Garden Adventure&quot;</td></tr><tr><td><code>difficulty</code></td><td><code>string</code></td><td>Game level</td><td>&quot;medium&quot;</td></tr><tr><td><code>status</code></td><td><code>string</code></td><td>Game state</td><td>&quot;playing&quot;</td></tr><tr><td><code>createdAt</code></td><td><code>timestamp</code></td><td>Creation time</td><td><code>2023-11-20T10:00:00Z</code></td></tr></tbody></table>
<p><strong>Responsibilities:</strong></p>
<ul>
<li>Manages active game sessions</li>
<li>Tracks turn order</li>
<li>Stores room configuration</li>
</ul>
<hr>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="games-collection"><code>games</code> Collection<a href="#games-collection" class="hash-link" aria-label="Direct link to games-collection" title="Direct link to games-collection">‚Äã</a></h6>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>gameId</code></td><td><code>string</code> (PK)</td><td>Session ID</td><td>&quot;game_123&quot;</td></tr><tr><td><code>roomId</code></td><td><code>string</code> (FK)</td><td>Associated room</td><td>&quot;ABCDEF&quot;</td></tr><tr><td><code>currentPhrase</code></td><td><code>string</code></td><td>Active story segment</td><td>&quot;The ___ flew high&quot;</td></tr><tr><td><code>completedPhrases</code></td><td><code>array</code></td><td>Finished segments</td><td><code>[&quot;The bird&quot;, &quot;The bird flew&quot;]</code></td></tr><tr><td><code>completedImages</code></td><td><code>array</code></td><td>Selected images</td><td><code>[{word: &quot;bird&quot;, src: &quot;bird.png&quot;}]</code></td></tr><tr><td><code>currentSectionIndex</code></td><td><code>number</code></td><td>Progress index</td><td><code>2</code></td></tr><tr><td><code>maxPlayers</code></td><td><code>number</code></td><td>Player limit</td><td><code>4</code></td></tr></tbody></table>
<p><strong>Responsibilities:</strong></p>
<ul>
<li>Tracks real-time game state</li>
<li>Stores completed content</li>
<li>Maintains player selections</li>
</ul>
<hr>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="stories-collection"><code>stories</code> Collection<a href="#stories-collection" class="hash-link" aria-label="Direct link to stories-collection" title="Direct link to stories-collection">‚Äã</a></h6>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>storyId</code></td><td><code>string</code> (PK)</td><td>Unique ID</td><td>&quot;story_garden&quot;</td></tr><tr><td><code>title</code></td><td><code>string</code></td><td>Story title</td><td>&quot;Garden Adventure&quot;</td></tr><tr><td><code>gradeLevel</code></td><td><code>number</code></td><td>Difficulty (1-3)</td><td><code>1</code></td></tr><tr><td><code>content</code></td><td><code>array</code></td><td>Story segments</td><td><code>[&quot;The ___&quot;, &quot;The ___ flew&quot;]</code></td></tr><tr><td><code>wordBank</code></td><td><code>map</code></td><td>AAC symbols</td><td><code>{&quot;bird&quot;: {image: &quot;bird.png&quot;, sound: &quot;bird.mp3&quot;}}</code></td></tr></tbody></table>
<p><strong>Responsibilities:</strong></p>
<ul>
<li>Stores story content</li>
<li>Provides AAC resources</li>
<li>Manages grade levels</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-flow-diagram">Data Flow Diagram<a href="#data-flow-diagram" class="hash-link" aria-label="Direct link to Data Flow Diagram" title="Direct link to Data Flow Diagram">‚Äã</a></h2>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="database-design">Database Design<a href="#database-design" class="hash-link" aria-label="Direct link to Database Design" title="Direct link to Database Design">‚Äã</a></h3>
<p>Here is the database section with an Entity-Relationship Diagram
(ERD) and a table design for StoryQuest. While Firestore is a NoSQL
database, we represent the structure relationally for design clarity.
Collections are shown as tables with their key fields.</p>
<p><strong>Entity-Relationship Diagram</strong></p>
<!-- -->
<p><em>Figure 2: An entity-relationship diagram showing interactions within the database</em></p>
<p><strong>Table Design</strong></p>
<p>Here is how the data would be structured in Firestore. Though Firestore is a NoSQL database, this relational layout helps clarify the relationships.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="firestore-collection-structure">Firestore Collection Structure<a href="#firestore-collection-structure" class="hash-link" aria-label="Direct link to Firestore Collection Structure" title="Direct link to Firestore Collection Structure">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="users-collection-figure-3"><code>users</code> Collection (Figure 3)<a href="#users-collection-figure-3" class="hash-link" aria-label="Direct link to users-collection-figure-3" title="Direct link to users-collection-figure-3">‚Äã</a></h3>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>userId</code> (PK)</td><td>string</td><td>Firebase Auth UID</td><td>&quot;xZ8jyT...&quot;</td></tr><tr><td><code>name</code></td><td>string</td><td>Player&#x27;s display name</td><td>&quot;Player 1&quot;</td></tr><tr><td><code>avatar</code></td><td>string</td><td>Emoji or image URL</td><td>&quot;ü¶ä&quot;</td></tr><tr><td><code>aacSettings</code></td><td>map</td><td>User preferences</td><td><code>{ voiceSpeed: 1.2, theme: &quot;dark&quot; }</code></td></tr><tr><td><code>createdAt</code></td><td>timestamp</td><td>Account creation</td><td><code>2023-11-20T09:15:00Z</code></td></tr><tr><td><code>lastActive</code></td><td>timestamp</td><td>Last login time</td><td><code>2023-11-25T14:30:00Z</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rooms-collection-figure-4"><code>rooms</code> Collection (Figure 4)<a href="#rooms-collection-figure-4" class="hash-link" aria-label="Direct link to rooms-collection-figure-4" title="Direct link to rooms-collection-figure-4">‚Äã</a></h3>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Validation</th></tr></thead><tbody><tr><td><code>roomId</code> (PK)</td><td>string</td><td>6-digit room code</td><td>&quot;ABCD12&quot;</td></tr><tr><td><code>hostId</code></td><td>string (FK)</td><td>Creator&#x27;s userId</td><td>Required</td></tr><tr><td><code>storyId</code></td><td>string (FK)</td><td>Selected story</td><td>Required</td></tr><tr><td><code>difficulty</code></td><td>string</td><td>Game level</td><td>&quot;easy&quot;/&quot;medium&quot;/&quot;hard&quot;</td></tr><tr><td><code>maxPlayers</code></td><td>number</td><td>Player limit</td><td>2-4</td></tr><tr><td><code>currentTurn</code></td><td>number</td><td>Turn index (1-4)</td><td>1</td></tr><tr><td><code>status</code></td><td>string</td><td>Game state</td><td>&quot;waiting&quot;/&quot;playing&quot;/&quot;completed&quot;</td></tr><tr><td><code>createdAt</code></td><td>timestamp</td><td>Creation time</td><td>Auto-set</td></tr><tr><td><code>timeLimit</code></td><td>number</td><td>Turn timer (seconds)</td><td>Optional</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="roomplayers-subcollection"><code>roomPlayers</code> Subcollection<a href="#roomplayers-subcollection" class="hash-link" aria-label="Direct link to roomplayers-subcollection" title="Direct link to roomplayers-subcollection">‚Äã</a></h3>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Notes</th></tr></thead><tbody><tr><td><code>userId</code> (PK)</td><td>string (FK)</td><td>Player reference</td><td>Indexed</td></tr><tr><td><code>name</code></td><td>string</td><td>Display name</td><td>Copied from user</td></tr><tr><td><code>avatar</code></td><td>string</td><td>Player icon</td><td>&quot;üê∂&quot;</td></tr><tr><td><code>turnOrder</code></td><td>number</td><td>Player sequence</td><td>1-4</td></tr><tr><td><code>joinedAt</code></td><td>timestamp</td><td>Join time</td><td>Auto-set</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stories-collection-figure-6"><code>stories</code> Collection (Figure 6)<a href="#stories-collection-figure-6" class="hash-link" aria-label="Direct link to stories-collection-figure-6" title="Direct link to stories-collection-figure-6">‚Äã</a></h3>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>storyId</code> (PK)</td><td>string</td><td>Unique ID</td><td>&quot;garden-1&quot;</td></tr><tr><td><code>title</code></td><td>string</td><td>Story title</td><td>&quot;Magic Garden&quot;</td></tr><tr><td><code>difficulty</code></td><td>number</td><td>Difficulty</td><td>1-3</td></tr><tr><td><code>content</code></td><td>array</td><td>Phrase segments</td><td><code>[&quot;The ___&quot;, &quot;sat on the ___&quot;]</code></td></tr><tr><td><code>wordBank</code></td><td>map</td><td>AAC resources</td><td><code>{apple: {image: &quot;apple.png&quot;, sound: &quot;apple.mp3&quot;}}</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gamestate-subcollection-within-rooms"><code>gameState</code> Subcollection (within rooms)<a href="#gamestate-subcollection-within-rooms" class="hash-link" aria-label="Direct link to gamestate-subcollection-within-rooms" title="Direct link to gamestate-subcollection-within-rooms">‚Äã</a></h3>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>currentPhrase</code></td><td>string</td><td>Active story segment</td></tr><tr><td><code>completedPhrases</code></td><td>array</td><td>Filled segments</td></tr><tr><td><code>selectedSymbols</code></td><td>array</td><td><code>{word: &quot;apple&quot;, by: &quot;user123&quot;, avatar: &quot;üê±&quot;}</code></td></tr><tr><td><code>currentTurn</code></td><td>number</td><td>Turn index</td></tr><tr><td><code>lastUpdated</code></td><td>timestamp</td><td>Auto-updated</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><details><summary>Revision History</summary><table><thead><tr><th scope="row">Author</th><th scope="row">Revision</th><th scope="row">Date</th></tr></thead><tbody>nothing</tbody></table></details><span class="theme-last-updated">Last updated<!-- --> by <b>Ian Tyler Applebaum</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/storyquest/docs/category/system-architecture"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">System Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/storyquest/docs/system-architecture/development-environment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Development Environment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#components-description" class="table-of-contents__link toc-highlight">Components Description</a><ul><li><a href="#client-front-end" class="table-of-contents__link toc-highlight">Client (Front-End)</a></li><li><a href="#server-back-end" class="table-of-contents__link toc-highlight">Server (Back-End)</a></li><li><a href="#class-diagrams" class="table-of-contents__link toc-highlight">Class Diagrams</a></li><li><a href="#database-schema" class="table-of-contents__link toc-highlight">Database Schema</a></li></ul></li><li><a href="#data-flow-diagram" class="table-of-contents__link toc-highlight">Data Flow Diagram</a><ul><li><a href="#database-design" class="table-of-contents__link toc-highlight">Database Design</a></li></ul></li><li><a href="#firestore-collection-structure" class="table-of-contents__link toc-highlight">Firestore Collection Structure</a><ul><li><a href="#users-collection-figure-3" class="table-of-contents__link toc-highlight"><code>users</code> Collection (Figure 3)</a></li><li><a href="#rooms-collection-figure-4" class="table-of-contents__link toc-highlight"><code>rooms</code> Collection (Figure 4)</a></li><li><a href="#roomplayers-subcollection" class="table-of-contents__link toc-highlight"><code>roomPlayers</code> Subcollection</a></li><li><a href="#stories-collection-figure-6" class="table-of-contents__link toc-highlight"><code>stories</code> Collection (Figure 6)</a></li><li><a href="#gamestate-subcollection-within-rooms" class="table-of-contents__link toc-highlight"><code>gameState</code> Subcollection (within rooms)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/storyquest/docs/intro">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Civic-Interactions-Lab/storyquest" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/storyquest/img/StoryQuest_fixed.png" alt="My Site Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/storyquest/img/StoryQuest_fixed.png" alt="My Site Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright ¬© 2025 StoryQuest, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>